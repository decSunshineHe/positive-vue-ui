import{_ as s,c as a,o as n,O as l}from"./chunks/framework.1963c5dd.js";const p="/positive-vue-ui/assets/login-tip-vue.6d45b48a.jpg",F=JSON.parse('{"title":"本地开发","description":"","frontmatter":{},"headers":[],"relativePath":"guide/local.md","filePath":"guide/local.md","lastUpdated":1683627176000}'),o={name:"guide/local.md"},e=l(`<h1 id="本地开发" tabindex="-1">本地开发 <a class="header-anchor" href="#本地开发" aria-label="Permalink to &quot;本地开发&quot;">​</a></h1><h2 id="前端-proxy" tabindex="-1">前端 Proxy <a class="header-anchor" href="#前端-proxy" aria-label="Permalink to &quot;前端 Proxy&quot;">​</a></h2><p>需要对 devServer 设置 Proxy 属性，对组件内置请求的 api 和 server 进行代理，解决本地开发的跨域问题，<code>vite.config.ts</code> 加入如下代码：</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki rose-pine-moon vp-code-dark"><code><span class="line"><span style="color:#3E8FB0;">const</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">serverAddress</span><span style="color:#E0DEF4;"> </span><span style="color:#3E8FB0;">=</span><span style="color:#E0DEF4;"> </span><span style="color:#F6C177;">&#39;http://10.224.32.144:8080/&#39;</span><span style="color:#908CAA;">;</span><span style="color:#E0DEF4;"> </span><span style="color:#908CAA;font-style:italic;">//</span><span style="color:#6E6A86;font-style:italic;"> 后端地址</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E0DEF4;">  </span><span style="color:#EA9A97;">server</span><span style="color:#908CAA;">:</span><span style="color:#E0DEF4;"> </span><span style="color:#908CAA;">{</span></span>
<span class="line"><span style="color:#E0DEF4;">    </span><span style="color:#EA9A97;">port</span><span style="color:#908CAA;">:</span><span style="color:#E0DEF4;"> </span><span style="color:#EA9A97;">3000</span><span style="color:#908CAA;">,</span></span>
<span class="line"><span style="color:#E0DEF4;">    </span><span style="color:#EA9A97;">proxy</span><span style="color:#908CAA;">:</span><span style="color:#E0DEF4;"> </span><span style="color:#908CAA;">{</span></span>
<span class="line"><span style="color:#E0DEF4;">      </span><span style="color:#F6C177;">&quot;/api&quot;</span><span style="color:#E0DEF4;">: </span><span style="color:#908CAA;">{</span></span>
<span class="line"><span style="color:#E0DEF4;">        target</span><span style="color:#908CAA;">:</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">serverAddress</span><span style="color:#908CAA;">,</span></span>
<span class="line"><span style="color:#E0DEF4;">        changeOrigin</span><span style="color:#908CAA;">:</span><span style="color:#E0DEF4;"> </span><span style="color:#EA9A97;">true</span><span style="color:#908CAA;">,</span></span>
<span class="line"><span style="color:#E0DEF4;">        secure</span><span style="color:#908CAA;">:</span><span style="color:#E0DEF4;"> </span><span style="color:#EA9A97;">false</span><span style="color:#908CAA;">,</span></span>
<span class="line"><span style="color:#E0DEF4;">      </span><span style="color:#908CAA;">},</span></span>
<span class="line"><span style="color:#E0DEF4;">      </span><span style="color:#F6C177;">&#39;/server&#39;</span><span style="color:#E0DEF4;">: </span><span style="color:#908CAA;">{</span></span>
<span class="line"><span style="color:#E0DEF4;">        target</span><span style="color:#908CAA;">:</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">serverAddress</span><span style="color:#908CAA;">,</span></span>
<span class="line"><span style="color:#E0DEF4;">        changeOrigin</span><span style="color:#908CAA;">:</span><span style="color:#E0DEF4;"> </span><span style="color:#EA9A97;">true</span><span style="color:#908CAA;">,</span></span>
<span class="line"><span style="color:#E0DEF4;">        secure</span><span style="color:#908CAA;">:</span><span style="color:#E0DEF4;"> </span><span style="color:#EA9A97;">false</span><span style="color:#908CAA;">,</span></span>
<span class="line"><span style="color:#E0DEF4;">      </span><span style="color:#908CAA;">},</span></span>
<span class="line"><span style="color:#E0DEF4;">    </span><span style="color:#908CAA;">},</span></span>
<span class="line"><span style="color:#E0DEF4;">  </span><span style="color:#908CAA;">},</span></span></code></pre><pre class="shiki rose-pine-dawn vp-code-light"><code><span class="line"><span style="color:#286983;">const</span><span style="color:#575279;"> </span><span style="color:#575279;font-style:italic;">serverAddress</span><span style="color:#575279;"> </span><span style="color:#286983;">=</span><span style="color:#575279;"> </span><span style="color:#EA9D34;">&#39;http://10.224.32.144:8080/&#39;</span><span style="color:#797593;">;</span><span style="color:#575279;"> </span><span style="color:#797593;font-style:italic;">//</span><span style="color:#9893A5;font-style:italic;"> 后端地址</span></span>
<span class="line"></span>
<span class="line"><span style="color:#575279;">  </span><span style="color:#D7827E;">server</span><span style="color:#797593;">:</span><span style="color:#575279;"> </span><span style="color:#797593;">{</span></span>
<span class="line"><span style="color:#575279;">    </span><span style="color:#D7827E;">port</span><span style="color:#797593;">:</span><span style="color:#575279;"> </span><span style="color:#D7827E;">3000</span><span style="color:#797593;">,</span></span>
<span class="line"><span style="color:#575279;">    </span><span style="color:#D7827E;">proxy</span><span style="color:#797593;">:</span><span style="color:#575279;"> </span><span style="color:#797593;">{</span></span>
<span class="line"><span style="color:#575279;">      </span><span style="color:#EA9D34;">&quot;/api&quot;</span><span style="color:#575279;">: </span><span style="color:#797593;">{</span></span>
<span class="line"><span style="color:#575279;">        target</span><span style="color:#797593;">:</span><span style="color:#575279;"> </span><span style="color:#575279;font-style:italic;">serverAddress</span><span style="color:#797593;">,</span></span>
<span class="line"><span style="color:#575279;">        changeOrigin</span><span style="color:#797593;">:</span><span style="color:#575279;"> </span><span style="color:#D7827E;">true</span><span style="color:#797593;">,</span></span>
<span class="line"><span style="color:#575279;">        secure</span><span style="color:#797593;">:</span><span style="color:#575279;"> </span><span style="color:#D7827E;">false</span><span style="color:#797593;">,</span></span>
<span class="line"><span style="color:#575279;">      </span><span style="color:#797593;">},</span></span>
<span class="line"><span style="color:#575279;">      </span><span style="color:#EA9D34;">&#39;/server&#39;</span><span style="color:#575279;">: </span><span style="color:#797593;">{</span></span>
<span class="line"><span style="color:#575279;">        target</span><span style="color:#797593;">:</span><span style="color:#575279;"> </span><span style="color:#575279;font-style:italic;">serverAddress</span><span style="color:#797593;">,</span></span>
<span class="line"><span style="color:#575279;">        changeOrigin</span><span style="color:#797593;">:</span><span style="color:#575279;"> </span><span style="color:#D7827E;">true</span><span style="color:#797593;">,</span></span>
<span class="line"><span style="color:#575279;">        secure</span><span style="color:#797593;">:</span><span style="color:#575279;"> </span><span style="color:#D7827E;">false</span><span style="color:#797593;">,</span></span>
<span class="line"><span style="color:#575279;">      </span><span style="color:#797593;">},</span></span>
<span class="line"><span style="color:#575279;">    </span><span style="color:#797593;">},</span></span>
<span class="line"><span style="color:#575279;">  </span><span style="color:#797593;">},</span></span></code></pre></div><h2 id="后端配置" tabindex="-1">后端配置 <a class="header-anchor" href="#后端配置" aria-label="Permalink to &quot;后端配置&quot;">​</a></h2><p>注意：<code>callBackUrl</code> 的端口需要与<a href="./../guide/local.html#前端-proxy">前端 Proxy</a>中<code>server.port</code>端口一致，示例如下</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki rose-pine-moon vp-code-dark"><code><span class="line"><span style="color:#9CCFD8;">maxtropy</span><span style="color:#908CAA;">:</span></span>
<span class="line"><span style="color:#E0DEF4;">  </span><span style="color:#9CCFD8;">openplatform</span><span style="color:#908CAA;">:</span></span>
<span class="line"><span style="color:#E0DEF4;">    </span><span style="color:#EA9A97;">...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E0DEF4;">    </span><span style="color:#9CCFD8;">integratedCoreUri</span><span style="color:#908CAA;">:</span><span style="color:#E0DEF4;"> </span><span style="color:#EA9A97;">true</span></span>
<span class="line"><span style="color:#E0DEF4;">    </span><span style="color:#9CCFD8;">callBackUrl</span><span style="color:#908CAA;">:</span><span style="color:#E0DEF4;"> </span><span style="color:#F6C177;">http://localhost:3000/server/callback</span><span style="color:#E0DEF4;"> </span><span style="color:#908CAA;font-style:italic;">#</span><span style="color:#6E6A86;font-style:italic;"> 前端 Proxy 中 server.port 端口</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E0DEF4;">    </span><span style="color:#EA9A97;">...</span></span>
<span class="line"><span style="color:#E0DEF4;">    </span><span style="color:#9CCFD8;">whiteList</span><span style="color:#908CAA;">:</span></span>
<span class="line"><span style="color:#E0DEF4;">      </span><span style="color:#908CAA;">-</span><span style="color:#E0DEF4;"> </span><span style="color:#F6C177;">/api/test</span></span></code></pre><pre class="shiki rose-pine-dawn vp-code-light"><code><span class="line"><span style="color:#56949F;">maxtropy</span><span style="color:#797593;">:</span></span>
<span class="line"><span style="color:#575279;">  </span><span style="color:#56949F;">openplatform</span><span style="color:#797593;">:</span></span>
<span class="line"><span style="color:#575279;">    </span><span style="color:#D7827E;">...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#575279;">    </span><span style="color:#56949F;">integratedCoreUri</span><span style="color:#797593;">:</span><span style="color:#575279;"> </span><span style="color:#D7827E;">true</span></span>
<span class="line"><span style="color:#575279;">    </span><span style="color:#56949F;">callBackUrl</span><span style="color:#797593;">:</span><span style="color:#575279;"> </span><span style="color:#EA9D34;">http://localhost:3000/server/callback</span><span style="color:#575279;"> </span><span style="color:#797593;font-style:italic;">#</span><span style="color:#9893A5;font-style:italic;"> 前端 Proxy 中 server.port 端口</span></span>
<span class="line"></span>
<span class="line"><span style="color:#575279;">    </span><span style="color:#D7827E;">...</span></span>
<span class="line"><span style="color:#575279;">    </span><span style="color:#56949F;">whiteList</span><span style="color:#797593;">:</span></span>
<span class="line"><span style="color:#575279;">      </span><span style="color:#797593;">-</span><span style="color:#575279;"> </span><span style="color:#EA9D34;">/api/test</span></span></code></pre></div><h2 id="检测登录态" tabindex="-1">检测登录态 <a class="header-anchor" href="#检测登录态" aria-label="Permalink to &quot;检测登录态&quot;">​</a></h2><p>当内置接口检测未登录时，会弹出框提示，点击确定后会跳转到登录页进行登录，登录后会跳转到选择租户页面，选择租户后会跳转到原页面。</p><p><img src="`+p+'" alt="loginTip"></p><p>注意：生产环境下也会检测登录态，但不会弹出框提示，而是直接跳转到登录页。</p>',11),t=[e];function c(r,y,i,E,A,d){return n(),a("div",null,t)}const C=s(o,[["render",c]]);export{F as __pageData,C as default};
